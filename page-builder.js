!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=18)}([function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",o=t[3];if(!o)return r;if(e&&"function"==typeof btoa){var n=(a=o,l=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),i=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[r].concat(i).concat([n]).join("\n")}var a,l,s;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,o){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(o)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(n[a]=!0)}for(var l=0;l<t.length;l++){var s=[].concat(t[l]);o&&n[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),e.push(s))}},e}},function(t,e,r){"use strict";var o,n=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),a=[];function l(t){for(var e=-1,r=0;r<a.length;r++)if(a[r].identifier===t){e=r;break}return e}function s(t,e){for(var r={},o=[],n=0;n<t.length;n++){var i=t[n],s=e.base?i[0]+e.base:i[0],c=r[s]||0,d="".concat(s," ").concat(c);r[s]=c+1;var u=l(d),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:d,updater:g(p,e),references:1}),o.push(d)}return o}function c(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var n=r.nc;n&&(o.nonce=n)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function p(t,e,r,o){var n=r?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=u(e,n);else{var i=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function h(t,e,r){var o=r.css,n=r.media,i=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),i&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var b=null,v=0;function g(t,e){var r,o,n;if(e.singleton){var i=v++;r=b||(b=c(e)),o=p.bind(null,r,i,!1),n=p.bind(null,r,i,!0)}else r=c(e),o=h.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var r=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<r.length;o++){var n=l(r[o]);a[n].references--}for(var i=s(t,e),c=0;c<r.length;c++){var d=l(r[c]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}r=i}}}},function(t,e,r){var o=r(1),n=r(3);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,'html{width:100vw;height:100vh;overflow:hidden}body{width:100%;height:100%;overflow:hidden;display:block;position:relative;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;background-color:var(--grey-200);color:var(--grey-800)}[draggable="true"]{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}a{text-decoration:none}\n',""]),e.default=n},function(t,e,r){var o=r(1),n=r(5);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,'.pt-bttn{display:inline-flex;height:36px;line-height:36px;border-width:1px;border-style:solid;border-color:transparent;font-size:var(--font-sm);text-transform:uppercase;user-select:none;font-weight:var(--font-medium);cursor:pointer;transition:all 75ms ease-in-out;justify-content:center;align-items:center;flex-flow:row nowrap}html[state="soft-loading"] .pt-bttn[type="submit"]{border-color:var(--neutral-200) !important;background-color:var(--neutral-200) !important;cursor:not-allowed !important;color:var(--neutral-700) !important}html[state="soft-loading"] .pt-bttn[type="submit"]::before{display:none !important}.pt-bttn[disabled]{border-color:var(--neutral-200) !important;background-color:var(--neutral-200) !important;cursor:not-allowed !important;color:var(--neutral-700) !important}.pt-bttn[disabled]::before{display:none !important}.pt-bttn.-text{padding:0 0.5rem;color:var(--grey-800)}.pt-bttn.-text.-primary:hover,.pt-bttn.-text.-primary:focus{color:var(--primary-800)}.pt-bttn.-text.-primary:active{color:var(--primary-900)}.pt-bttn.-text.-primary::before{background-color:var(--primary-500)}.pt-bttn.-text.-black:active{color:var(--grey-900)}.pt-bttn.-text.-black::before{background-color:var(--grey-900)}.pt-bttn.-text.-white{color:var(--white)}.pt-bttn.-text.-white::before{background-color:var(--white)}.pt-bttn.-text.-success:hover,.pt-bttn.-text.-success:focus{color:var(--success-800)}.pt-bttn.-text.-success:active{color:var(--success-800)}.pt-bttn.-text.-success::before{background-color:var(--success-500)}.pt-bttn.-text.-warning:hover,.pt-bttn.-text.-warning:focus{color:var(--warning-800)}.pt-bttn.-text.-warning:active{color:var(--warning-900)}.pt-bttn.-text.-warning::before{background-color:var(--warning-500)}.pt-bttn.-text.-danger:hover,.pt-bttn.-text.-danger:focus{color:var(--danger-800)}.pt-bttn.-text.-danger:active{color:var(--danger-900)}.pt-bttn.-text.-danger::before{background-color:var(--danger-500)}.pt-bttn.-text:hover::before,.pt-bttn.-text:focus::before{opacity:0.1;transform:translate(-50%, -50%) scale(1);transition:all 150ms var(--ease-bounce)}.pt-bttn.-text:active::before{opacity:0.15;transform:translate(-50%, -50%) scale(1)}.pt-bttn.-text::before{content:"";display:inline-block;width:100%;height:100%;border-radius:0.125rem;background-color:transparent;opacity:0.06;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%) scale(0);transition:all 75ms var(--ease-in-out)}.pt-bttn.-solid{padding:0 1rem}.pt-bttn.-solid.-primary{background-color:var(--primary-700);border-color:var(--primary-700);color:var(--white)}.pt-bttn.-solid.-primary:hover,.pt-bttn.-solid.-primary:focus{background-color:var(--primary-600);border-color:var(--primary-600);color:var(--white)}.pt-bttn.-solid.-primary:active{background-color:var(--primary-800);border-color:var(--primary-800);color:var(--white)}.pt-bttn.-solid.-black{background-color:var(--grey-900);border-color:var(--grey-900);color:var(--white)}.pt-bttn.-solid.-black:hover,.pt-bttn.-solid.-black:focus{background-color:var(--grey-800);border-color:var(--grey-800);color:var(--white)}.pt-bttn.-solid.-black:active{background-color:var(--black);border-color:var(--black);color:var(--white)}.pt-bttn.-solid.-white{background-color:var(--white);border-color:var(--white);color:var(--grey-900)}.pt-bttn.-solid.-white:hover,.pt-bttn.-solid.-white:focus{background-color:var(--grey-100);border-color:var(--grey-100)}.pt-bttn.-solid.-white:active{background-color:var(--grey-200);border-color:var(--grey-200)}.pt-bttn.-solid.-success{background-color:var(--success-700);border-color:var(--success-700);color:var(--white)}.pt-bttn.-solid.-success:hover,.pt-bttn.-solid.-success:focus{background-color:var(--success-600);border-color:var(--success-600)}.pt-bttn.-solid.-success:active{background-color:var(--success-800);border-color:var(--success-800)}.pt-bttn.-solid.-warning{background-color:var(--warning-400);border-color:var(--warning-400);color:var(--neutral-900)}.pt-bttn.-solid.-warning:hover,.pt-bttn.-solid.-warning:focus{background-color:var(--warning-300);border-color:var(--warning-300)}.pt-bttn.-solid.-warning:active{background-color:var(--warning-500);border-color:var(--warning-500)}.pt-bttn.-solid.-danger{background-color:var(--danger-700);border-color:var(--danger-700);color:var(--white)}.pt-bttn.-solid.-danger:hover,.pt-bttn.-solid.-danger:focus{background-color:var(--danger-600);border-color:var(--danger-600)}.pt-bttn.-solid.-danger:active{background-color:var(--danger-800);border-color:var(--danger-800)}.pt-bttn.-outline{padding:0 1rem}.pt-bttn.-outline.-primary{border-color:var(--primary-700);color:var(--primary-800)}.pt-bttn.-outline.-primary:active{color:var(--primary-900)}.pt-bttn.-outline.-primary::before{background-color:var(--primary-500)}.pt-bttn.-outline.-black{border-color:var(--grey-700);color:var(--grey-800)}.pt-bttn.-outline.-black:active{color:var(--grey-900)}.pt-bttn.-outline.-black::before{background-color:var(--grey-900)}.pt-bttn.-outline.-white{border-color:var(--white);color:var(--white)}.pt-bttn.-outline.-white::before{background-color:var(--white)}.pt-bttn.-outline.-success{border-color:var(--success-700);color:var(--success-800)}.pt-bttn.-outline.-success:active{color:var(--success-900)}.pt-bttn.-outline.-success::before{background-color:var(--success-500)}.pt-bttn.-outline.-warning{border-color:var(--warning-700);color:var(--warning-800)}.pt-bttn.-outline.-warning:active{color:var(--warning-900)}.pt-bttn.-outline.-warning::before{background-color:var(--warning-500)}.pt-bttn.-outline.-danger{border-color:var(--danger-700);color:var(--danger-800)}.pt-bttn.-outline.-danger:active{color:var(--danger-900)}.pt-bttn.-outline.-danger::before{background-color:var(--danger-500)}.pt-bttn.-outline:hover::before,.pt-bttn.-outline:focus::before{opacity:0.1}.pt-bttn.-outline:active::before{opacity:0.15}.pt-bttn.-outline::before{content:"";display:inline-block;width:100%;height:100%;opacity:0;position:absolute;top:0;background-color:transparent;left:0;transition:all 75ms ease-in-out}.pt-bttn.-tall{height:52px;line-height:52px}.pt-bttn.-tall.-pill{border-radius:26px}.pt-bttn.-tall.-icon-only{width:52px}.pt-bttn.-wide{padding:0 2rem}.pt-bttn.-rounded{border-radius:0.25rem}.pt-bttn.-pill{border-radius:18px}.pt-bttn.-raised{box-shadow:var(--shadow-lg)}.pt-bttn.-raised.-solid.-white{border-color:var(--grey-100)}.pt-bttn.-raised.-solid.-white:active{border-color:var(--grey-200)}.pt-bttn.-raised:active{box-shadow:var(--shadow-sm);transform:translateY(2px)}.pt-bttn.-round{border-radius:50%}.pt-bttn.-icon-only{padding:0;width:36px}.pt-bttn.-icon-only i{margin-right:0}.pt-bttn.-icon{padding:0 1rem 0 0.5rem}.pt-bttn i{display:inline-flex;justify-content:center;align-items:center;width:24px;height:24px;margin-right:0.25rem}.pt-bttn i svg{width:16px;height:16px}\n',""]),e.default=n},function(t,e,r){var o=r(1),n=r(7);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,".page-builder{display:grid;grid-template-columns:320px 1fr;height:calc(100% - 64px);width:100%}.page-builder aside{background-color:var(--white);border-right:1px solid var(--grey-300);padding:2rem}.page-builder .view{display:block;width:100%;overflow-y:scroll;padding:2rem}.page-builder .view .page{width:100%;max-width:1920px;background-color:var(--white);border:1px solid var(--grey-300);position:relative;display:block;margin:0 auto;transition:all 150ms var(--ease-in-out)}.page-builder .view .page.can-drop{border-color:var(--primary-400);box-shadow:0 0 0 4px var(--primary-200)}.page-builder .view .page .drop-zone{display:block;width:100%;padding:2rem;pointer-events:none;user-select:none}.page-builder .view .page .drop-zone p{border:1px dashed var(--primary-400);color:var(--primary-700);display:block;width:100%;padding:2rem;text-align:center}.capture-scroll{position:fixed;width:100%;height:2rem;left:0;background-color:transparent;z-index:99999}.capture-scroll.top{top:0}.capture-scroll.bottom{bottom:0}\n",""]),e.default=n},function(t,e,r){var o=r(1),n=r(9);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,"header{display:flex;align-items:center;justify-content:space-between;flex-flow:row nowrap;height:64px;padding:0 2rem;background-color:var(--white);border-bottom:1px solid var(--grey-300)}\n",""]),e.default=n},function(t,e,r){var o=r(1),n=r(11);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,"circle-rail-spinner{display:inline-block;height:64px;width:64px;box-sizing:border-box;border:4px solid var(--neutral-200);border-top:4px solid var(--primary-700);border-radius:50%;animation:circleRailSpinner 900ms infinite linear}circle-rail-spinner.-inline{display:inline-block;vertical-align:middle;margin:0}@keyframes circleRailSpinner{from{transform:rotate(0deg)}to{transform:rotate(359deg)}}\n",""]),e.default=n},function(t,e,r){var o=r(1),n=r(13);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,".title-input{display:inline-block;font-size:var(--font-lg);font-weight:var(--font-medium);color:var(--grey-900);transition:all 150ms var(--ease-in-out);height:36px;line-height:36px;width:400px;text-overflow:ellipsis;padding:0 0.5rem;border-radius:0.25rem;border-style:solid;border-width:1px;border-color:transparent}.title-input:hover{border-color:var(--grey-200)}.title-input:focus{border-color:var(--primary-400);box-shadow:0 0 0 5px var(--primary-100);background-color:var(--white)}\n",""]),e.default=n},function(t,e,r){var o=r(1),n=r(15);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,".button-block{padding:0 0.5rem;border-radius:0.25rem;min-height:36px;display:flex;width:100%;flex-flow:row nowrap;align-items:center;cursor:move;transition:all 150ms var(--ease-in-out);background-color:var(--white);color:var(--grey-700);font-size:var(--font-sm);margin-bottom:0.5rem;border:1px solid var(--grey-200)}.button-block:hover{box-shadow:var(--shadow-md);color:var(--grey-800)}.button-block:active{box-shadow:none;background-color:var(--grey-100);color:var(--grey-900)}.button-block:focus{border-color:var(--grey-400)}.button-block.is-dragging{opacity:0.3;box-shadow:none}\n",""]),e.default=n},function(t,e,r){var o=r(1),n=r(17);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var i={insert:"head",singleton:!1};o(n,i);t.exports=n.locals||{}},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r.n(o)()(!1);n.push([t.i,'.pt-block{display:block;width:100%;position:relative;transition:all 150ms var(--ease-in-out);user-select:none}.pt-block:hover,.pt-block:focus-within{z-index:999}.pt-block:hover:not(.dragging),.pt-block:focus-within:not(.dragging){box-shadow:0 0 0 2px var(--primary-400)}.pt-block:hover .pt-block-menu,.pt-block:focus-within .pt-block-menu{opacity:1}.pt-block::after{content:"";position:absolute;left:0;width:100%;height:50%;background-color:var(--primary-500);z-index:999;pointer-events:none;user-select:none;opacity:0;visibility:hidden;top:0;transform:translateY(50%)}.pt-block.dragging{opacity:0.3}.pt-block.dragging .pt-block-menu{opacity:1}.pt-block.dropzone.drop-top::after{transform:translateY(0%)}.pt-block.dropzone.drop-bottom::after{transform:translateY(100%)}.pt-block.dropzone::after{opacity:0.3;visibility:visible}.pt-block .pt-block-menu{z-index:9999;height:36px;border-radius:18px;background-color:var(--white);box-shadow:var(--shadow-lg);position:absolute;top:1rem;right:1rem;border:1px solid var(--grey-100);opacity:0;visibility:visible;transition:all 150ms var(--ease-in-out)}.pt-block .pt-block-menu .pt-block-button{width:36px;height:36px;padding:0;display:inline-flex;justify-content:center;align-items:center;color:var(--grey-700);transition:all 150ms var(--ease-in-out)}.pt-block .pt-block-menu .pt-block-button.-danger::before{background-color:var(--danger-900)}.pt-block .pt-block-menu .pt-block-button.-move{cursor:move}.pt-block .pt-block-menu .pt-block-button:hover::before,.pt-block .pt-block-menu .pt-block-button:focus::before{opacity:0.05}.pt-block .pt-block-menu .pt-block-button:hover.-danger,.pt-block .pt-block-menu .pt-block-button:focus.-danger{color:var(--danger-700)}.pt-block .pt-block-menu .pt-block-button:active::before{opacity:0.1}.pt-block .pt-block-menu .pt-block-button::before{content:"";background-color:var(--grey-900);width:calc(100% - 6px);height:calc(100% - 6px);border-radius:50%;position:absolute;opacity:0;transition:all 150ms var(--ease-in-out)}.pt-block .pt-block-menu .pt-block-button svg{width:16px;height:16px}\n',""]),e.default=n},function(t,e,r){"use strict";r.r(e);var o,n,i,a,l,s={},c=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function u(t,e){for(var r in e)t[r]=e[r];return t}function p(t){var e=t.parentNode;e&&e.removeChild(t)}function h(t,e,r){var o,n=arguments,i={};for(o in e)"key"!==o&&"ref"!==o&&(i[o]=e[o]);if(arguments.length>3)for(r=[r],o=3;o<arguments.length;o++)r.push(n[o]);if(null!=r&&(i.children=r),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===i[o]&&(i[o]=t.defaultProps[o]);return b(t,i,e&&e.key,e&&e.ref,null)}function b(t,e,r,n,i){var a={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(a.__v=a),o.vnode&&o.vnode(a),a}function v(t){return t.children}function g(t,e){this.props=t,this.context=e}function f(t,e){if(null==e)return t.__?f(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?f(t):null}function _(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return _(t)}}function m(t){(!t.__d&&(t.__d=!0)&&n.push(t)&&!y.__r++||a!==o.debounceRendering)&&((a=o.debounceRendering)||i)(y)}function y(){for(var t;y.__r=n.length;)t=n.sort((function(t,e){return t.__v.__b-e.__v.__b})),n=[],t.some((function(t){var e,r,o,n,i,a,l;t.__d&&(a=(i=(e=t).__v).__e,(l=e.__P)&&(r=[],(o=u({},i)).__v=o,n=C(l,i,o,e.__n,void 0!==l.ownerSVGElement,null,r,null==a?f(i):a),N(r,i),n!=a&&_(i)))}))}function k(t,e,r,o,n,i,a,l,d,u){var h,g,_,m,y,k,x,S=o&&o.__k||c,D=S.length;for(d==s&&(d=null!=a?a[0]:D?f(o,0):null),r.__k=[],h=0;h<e.length;h++)if(null!=(m=r.__k[h]=null==(m=e[h])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m?b(null,m,null,null,m):Array.isArray(m)?b(v,{children:m},null,null,null):null!=m.__e||null!=m.__c?b(m.type,m.props,m.key,null,m.__v):m)){if(m.__=r,m.__b=r.__b+1,null===(_=S[h])||_&&m.key==_.key&&m.type===_.type)S[h]=void 0;else for(g=0;g<D;g++){if((_=S[g])&&m.key==_.key&&m.type===_.type){S[g]=void 0;break}_=null}y=C(t,m,_=_||s,n,i,a,l,d,u),(g=m.ref)&&_.ref!=g&&(x||(x=[]),_.ref&&x.push(_.ref,null,m),x.push(g,m.__c||y,m)),null!=y?(null==k&&(k=y),d=w(t,m,_,S,a,y,d),u||"option"!=r.type?"function"==typeof r.type&&(r.__d=d):t.value=""):d&&_.__e==d&&d.parentNode!=t&&(d=f(_))}if(r.__e=k,null!=a&&"function"!=typeof r.type)for(h=a.length;h--;)null!=a[h]&&p(a[h]);for(h=D;h--;)null!=S[h]&&E(S[h],S[h]);if(x)for(h=0;h<x.length;h++)T(x[h],x[++h],x[++h])}function w(t,e,r,o,n,i,a){var l,s,c;if(void 0!==e.__d)l=e.__d,e.__d=void 0;else if(n==r||i!=a||null==i.parentNode)t:if(null==a||a.parentNode!==t)t.appendChild(i),l=null;else{for(s=a,c=0;(s=s.nextSibling)&&c<o.length;c+=2)if(s==i)break t;t.insertBefore(i,a),l=a}return void 0!==l?l:i.nextSibling}function x(t,e,r){"-"===e[0]?t.setProperty(e,r):t[e]="number"==typeof r&&!1===d.test(e)?r+"px":null==r?"":r}function S(t,e,r,o,n){var i,a,l,s,c;if(n?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(i=t.style,"string"==typeof r)i.cssText=r;else{if("string"==typeof o&&(i.cssText="",o=null),o)for(s in o)r&&s in r||x(i,s,"");if(r)for(c in r)o&&r[c]===o[c]||x(i,c,r[c])}else"o"===e[0]&&"n"===e[1]?(a=e!==(e=e.replace(/Capture$/,"")),l=e.toLowerCase(),e=(l in t?l:e).slice(2),r?(o||t.addEventListener(e,D,a),(t.l||(t.l={}))[e]=r):t.removeEventListener(e,D,a)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&"download"!==e&&!n&&e in t?t[e]=null==r?"":r:"function"!=typeof r&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==r||!1===r?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):null==r||!1===r&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function D(t){this.l[t.type](o.event?o.event(t):t)}function B(t,e,r){var o,n;for(o=0;o<t.__k.length;o++)(n=t.__k[o])&&(n.__=t,n.__e&&("function"==typeof n.type&&n.__k.length>1&&B(n,e,r),e=w(r,n,n,t.__k,null,n.__e,e),"function"==typeof t.type&&(t.__d=e)))}function C(t,e,r,n,i,a,l,s,c){var d,p,h,b,f,_,m,y,w,x,S,D=e.type;if(void 0!==e.constructor)return null;(d=o.__b)&&d(e);try{t:if("function"==typeof D){if(y=e.props,w=(d=D.contextType)&&n[d.__c],x=d?w?w.props.value:d.__:n,r.__c?m=(p=e.__c=r.__c).__=p.__E:("prototype"in D&&D.prototype.render?e.__c=p=new D(y,x):(e.__c=p=new g(y,x),p.constructor=D,p.render=P),w&&w.sub(p),p.props=y,p.state||(p.state={}),p.context=x,p.__n=n,h=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=D.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=u({},p.__s)),u(p.__s,D.getDerivedStateFromProps(y,p.__s))),b=p.props,f=p.state,h)null==D.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==D.getDerivedStateFromProps&&y!==b&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(y,x),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(y,p.__s,x)||e.__v===r.__v){p.props=y,p.state=p.__s,e.__v!==r.__v&&(p.__d=!1),p.__v=e,e.__e=r.__e,e.__k=r.__k,p.__h.length&&l.push(p),B(e,s,t);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(y,p.__s,x),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(b,f,_)}))}p.context=x,p.props=y,p.state=p.__s,(d=o.__r)&&d(e),p.__d=!1,p.__v=e,p.__P=t,d=p.render(p.props,p.state,p.context),p.state=p.__s,null!=p.getChildContext&&(n=u(u({},n),p.getChildContext())),h||null==p.getSnapshotBeforeUpdate||(_=p.getSnapshotBeforeUpdate(b,f)),S=null!=d&&d.type==v&&null==d.key?d.props.children:d,k(t,Array.isArray(S)?S:[S],e,r,n,i,a,l,s,c),p.base=e.__e,p.__h.length&&l.push(p),m&&(p.__E=p.__=null),p.__e=!1}else null==a&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=M(r.__e,e,r,n,i,a,l,c);(d=o.diffed)&&d(e)}catch(t){e.__v=null,o.__e(t,e,r)}return e.__e}function N(t,e){o.__c&&o.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){o.__e(t,e.__v)}}))}function M(t,e,r,o,n,i,a,l){var d,u,p,h,b,v=r.props,g=e.props;if(n="svg"===e.type||n,null!=i)for(d=0;d<i.length;d++)if(null!=(u=i[d])&&((null===e.type?3===u.nodeType:u.localName===e.type)||t==u)){t=u,i[d]=null;break}if(null==t){if(null===e.type)return document.createTextNode(g);t=n?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,g.is&&{is:g.is}),i=null,l=!1}if(null===e.type)v!==g&&t.data!==g&&(t.data=g);else{if(null!=i&&(i=c.slice.call(t.childNodes)),p=(v=r.props||s).dangerouslySetInnerHTML,h=g.dangerouslySetInnerHTML,!l){if(null!=i)for(v={},b=0;b<t.attributes.length;b++)v[t.attributes[b].name]=t.attributes[b].value;(h||p)&&(h&&p&&h.__html==p.__html||(t.innerHTML=h&&h.__html||""))}(function(t,e,r,o,n){var i;for(i in r)"children"===i||"key"===i||i in e||S(t,i,null,r[i],o);for(i in e)n&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===e[i]||S(t,i,e[i],r[i],o)})(t,g,v,n,l),h?e.__k=[]:(d=e.props.children,k(t,Array.isArray(d)?d:[d],e,r,o,"foreignObject"!==e.type&&n,i,a,s,l)),l||("value"in g&&void 0!==(d=g.value)&&d!==t.value&&S(t,"value",d,v.value,!1),"checked"in g&&void 0!==(d=g.checked)&&d!==t.checked&&S(t,"checked",d,v.checked,!1))}return t}function T(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(t){o.__e(t,r)}}function E(t,e,r){var n,i,a;if(o.unmount&&o.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||T(n,null,e)),r||"function"==typeof t.type||(r=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(t){o.__e(t,e)}n.base=n.__P=null}if(n=t.__k)for(a=0;a<n.length;a++)n[a]&&E(n[a],e,r);null!=i&&p(i)}function P(t,e,r){return this.constructor(t,r)}function L(t,e,r){var n,i,a;o.__&&o.__(t,e),i=(n=r===l)?null:r&&r.__k||e.__k,t=h(v,null,[t]),a=[],C(e,(n?e:r||e).__k=t,i||s,s,void 0!==e.ownerSVGElement,r&&!n?[r]:i?null:e.childNodes.length?c.slice.call(e.childNodes):null,a,r||s,n),N(a,t)}o={__e:function(t,e){for(var r,o;e=e.__;)if((r=e.__c)&&!r.__)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError&&(o=!0,r.setState(r.constructor.getDerivedStateFromError(t))),null!=r.componentDidCatch&&(o=!0,r.componentDidCatch(t)),o)return m(r.__E=r)}catch(e){t=e}throw t}},g.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=u({},this.state),"function"==typeof t&&(t=t(r,this.props)),t&&u(r,t),null!=t&&this.__v&&(e&&this.__h.push(e),m(this))},g.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),m(this))},g.prototype.render=v,n=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,y.__r=0,l=s;r(2),r(4),r(6),r(8),r(10),r(12);class j extends g{constructor(){super(...arguments),this.handleInput=t=>{const e=t.currentTarget;this.props.callback(e.value)},this.handleBlur=t=>{const e=t.currentTarget.value.trim();e.length?this.props.callback(e):this.props.callback("Untitled page")}}render(){return h("input",{autofocus:!0,className:"title-input",type:"text",autocapitalize:!1,autocomplete:"no",value:this.props.value,onInput:this.handleInput,onBlur:this.handleBlur})}}r(14);class z extends g{constructor(){super(),this.startDrag=t=>{t.dataTransfer.dropEffect="move",this.setState({dragging:!0}),this.props.callback(this.props.handle)},this.endDrag=()=>{this.setState({dragging:!1})},this.click=()=>{this.props.addBlockCallback(this.props.handle)},this.state={dragging:!1},this.button={current:null}}render(){return h("button",{className:"button-block "+(this.state.dragging?"is-dragging":""),onDragStart:this.startDrag,onDragEnd:this.endDrag,draggable:!0,onClick:this.click,ref:this.button},this.props.label)}}r(16);class I extends g{constructor(){super(),this.removeBlock=()=>{this.props.removeCallback(this.props.index)},this.startDrag=t=>{const e=document.body.querySelector("no-op")||document.createElement("no-op");e.style.cssText="opacity:0;visibility:hidden;position:absolute;top:-9999px;left:-9999px;",e.isConnected||document.body.appendChild(e),t.dataTransfer.setDragImage(e,0,0),this.setState({style:"dragging"}),this.props.startBlockShift(this.props.index)},this.dragOver=t=>{if(this.props.shiftingBlock!==this.props.index){const e={x:t.clientX,y:t.clientY},r=this.block.current.getBoundingClientRect();let o=this.hitDetect(e,r);this.setState({style:"dropzone",dropPosition:-1===o?"top":"bottom"})}},this.dragLeave=t=>{this.props.shiftingBlock!==this.props.index&&this.setState({style:null,dropPosition:null})},this.handleDrop=t=>{if(t.preventDefault(),this.props.shiftingBlock!==this.props.index){const e={x:t.clientX,y:t.clientY},r=this.block.current.getBoundingClientRect();let o=this.hitDetect(e,r);(-1===o&&this.props.shiftingBlock===this.props.index-1||1===o&&this.props.shiftingBlock===this.props.index+1)&&(o=0),this.props.shiftBlocks(this.props.shiftingBlock,this.props.index,o)}this.setState({style:null})},this.endDrag=t=>{t.preventDefault(),this.setState({style:null})},this.handleMoveClick=t=>{t instanceof KeyboardEvent&&this.props.keyboardCallback(this.props.index===this.props.keyboardFocusedIndex?null:this.props.index)},this.state={style:null,dropPosition:null},this.block={current:null}}hitDetect(t,e){const r=e.y+e.height/2;return t.y>=r?1:-1}render(){return h("div",{ref:this.block,className:`pt-block ${this.props.keyboardFocusedIndex===this.props.index?"dragging":""} ${this.state.style} ${this.state.dropPosition?"drop-"+this.state.dropPosition:""}`,onDragOver:this.dragOver,onDrop:this.handleDrop,onDragLeave:this.dragLeave,"data-index":this.props.index},h("div",{className:"pt-block-menu"},h("button",{"aria-label":"move block position",onDragStart:this.startDrag,onDragEnd:this.endDrag,className:"pt-block-button -move",draggable:!0,onKeyPress:this.handleMoveClick},h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h("path",{fill:"currentColor",d:"M276 236.075h115.85v-76.15c0-10.691 12.926-16.045 20.485-8.485l96.149 96.149c4.686 4.686 4.686 12.284 0 16.971l-96.149 96.149c-7.56 7.56-20.485 2.206-20.485-8.485v-76.149H275.999v115.776h76.15c10.691 0 16.045 12.926 8.485 20.485l-96.149 96.15c-4.686 4.686-12.284 4.686-16.971 0l-96.149-96.149c-7.56-7.56-2.206-20.485 8.485-20.485H236V276.075H120.149v76.149c0 10.691-12.926 16.045-20.485 8.485L3.515 264.56c-4.686-4.686-4.686-12.284 0-16.971l96.149-96.149c7.56-7.56 20.485-2.206 20.485 8.485v76.15H236V120.15h-76.149c-10.691 0-16.045-12.926-8.485-20.485l96.149-96.149c4.686-4.686 12.284-4.686 16.971 0l96.149 96.149c7.56 7.56 2.206 20.485-8.485 20.485H276v115.925z"}))),h("button",{"aria-label":"delete block "+this.props.index,onClick:this.removeBlock,className:"pt-block-button -danger"},h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},h("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"})))),h("div",{style:{width:"100%",position:"relative",display:"block"},dangerouslySetInnerHTML:{__html:this.props.html}}))}}const F=document.body.querySelector("#page-builder-mounting-point");L(h(class extends g{constructor(){super(),this.dragOver=t=>{t.preventDefault();const e={...this.state};e.drag.over=!0,this.setState(e)},this.dragLeave=t=>{t.preventDefault();const e={...this.state};e.drag.over=!1,this.setState(e)},this.handleDrop=t=>{t.preventDefault(),this.state.drag.handle&&!this.state.view.length&&this.loadBlock(this.state.drag.handle),this.setState({drag:{over:!1,handle:null,index:null,scrollDirection:0}})},this.handleReset=()=>{this.setState({view:[]})},this.renderBlockButton=(t,e)=>{if(t.group===e)return h(z,{label:t.label,handle:t.handle,callback:this.setDragHandle.bind(this),addBlockCallback:this.loadBlock.bind(this)})},this.renderGroup=t=>{let e=this.state.blocks.map(e=>this.renderBlockButton(e,t.handle));return h("div",{className:"block w-full mb-4"},h("h3",{className:"block w-full mb-1 font-grey-800 font-medium cursor-default text-uppercase"},t.label),e)},this.renderBlock=(t,e)=>{let r=this.state.blockData[t].html;return h(I,{index:e,html:r,removeCallback:this.removeBlock.bind(this),shiftBlocks:this.shiftBlocks.bind(this),shiftingBlock:this.state.drag.index,startBlockShift:this.startBlockShift.bind(this),keyboardCallback:this.keyboardShift.bind(this),keyboardFocusedIndex:this.state.keyboardFocusedIndex})},this.startBodyDrag=t=>{let e=t.clientY<=100?-1:1;const r={...this.state};r.drag.scrollDirection=e,this.setState(r)},this.endBodyDrag=t=>{const e={...this.state};e.drag.scrollDirection=0,this.setState(e)},this.handleKeyboardMove=t=>{if(t instanceof KeyboardEvent&&null!==this.state.keyboardFocusedIndex){switch(t.key.toLowerCase()){case"arrowup":this.keyboardShiftBlock(-1);break;case"arrowdown":this.keyboardShiftBlock(1)}}},this.view={current:null},this.state={title:"Untitled page",groups:[],blocks:[],blockData:{},view:[],drag:{over:!1,handle:null,index:null,scrollDirection:0},keyboardFocusedIndex:null}}updateTitle(t){this.setState({title:t})}async fetchBlocks(){const t=await fetch(`${location.origin}/${F.dataset.cpTrigger}/papertrain/api/config.json`,{method:"GET",credentials:"include",headers:new Headers({Accept:"application/json"})}),e=await t.json();if(t.ok){const t={...this.state};t.groups=e.groups,t.blocks=e.blocks,this.setState(t)}}async fetchBlock(t){const e=document.createElement("link");e.href=`${location.origin}/assets/${t}.css`,e.rel="stylesheet",document.head.appendChild(e);const r=document.createElement("script");r.src=`${location.origin}/assets/${t}.mjs`,r.type="module",document.head.appendChild(r);const o=await fetch(`${location.origin}/${F.dataset.cpTrigger}/papertrain/api/render/${t}`,{method:"GET",credentials:"include"});return await o.text()}async loadBlock(t,e=null,r=null){var o;if(null===(o=this.state.blockData)||void 0===o?void 0:o[t]){const o={...this.state};null!==e&&null!==r?-1===r?o.view.splice(e,0,t):o.view.splice(e+1,0,t):o.view.push(t),this.setState(o)}else{const o=await this.fetchBlock(t),n={...this.state};n.blockData[t]={html:o},null!==e&&null!==r?-1===r?n.view.splice(e,0,t):n.view.splice(e+1,0,t):n.view.push(t),this.setState(n)}setTimeout(()=>{this.view.current.scrollTo({top:this.view.current.scrollHeight,left:0,behavior:"smooth"})},150)}setDragHandle(t){const e={...this.state};e.drag.handle=t,this.setState(e)}removeBlock(t){const e={...this.state};e.view.splice(t,1),this.setState(e);const r=document.body.querySelector("button");r.focus(),r.blur()}shiftBlocks(t,e,r){if(null===t&&null!==this.state.drag.handle)return void this.loadBlock(this.state.drag.handle,e,r);if(e>=this.state.view.length||e<0)return;if(0!==r){const o={...this.state},n=o.view[t];o.view.splice(t,1),-1===r?o.view.splice(e,0,n):o.view.splice(e+1,0,n),this.setState(o)}const o=document.body.querySelector("button");o.focus(),o.blur(),setTimeout(()=>{const t=document.body.querySelector(`.pt-block[data-index="${e}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})},150)}startBlockShift(t){this.setState({drag:{handle:null,over:!0,index:t,scrollDirection:0}})}keyboardShift(t){this.setState({keyboardFocusedIndex:t})}scrollCallback(){this.view.current.scrollBy({top:10*this.state.drag.scrollDirection,left:0,behavior:"auto"}),window.requestAnimationFrame(()=>{this.scrollCallback()})}keyboardShiftBlock(t){const e=this.state.keyboardFocusedIndex+t;if(e<0||e>=this.state.view.length)return;console.log(this.state.keyboardFocusedIndex,e,t);const r={...this.state},o=r.view[this.state.keyboardFocusedIndex];r.view.splice(this.state.keyboardFocusedIndex,1),r.view.splice(e,0,o),r.keyboardFocusedIndex=e,this.setState(r)}componentDidMount(){this.fetchBlocks();const t=document.createElement("link");t.href=location.origin+"/assets/normalize.css",t.rel="stylesheet",document.head.appendChild(t);const e=document.createElement("link");e.href=location.origin+"/assets/brixi.css",e.rel="stylesheet",document.head.appendChild(e);const r=document.createElement("link");r.href=location.origin+"/assets/buttons.css",r.rel="stylesheet",document.head.appendChild(r),document.addEventListener("keyup",this.handleKeyboardMove),this.scrollCallback()}render(){let t=null;t=this.state.blocks.length?this.state.groups.map(t=>this.renderGroup(t)):h("div",{className:"w-full h-full",flex:"justify-center items-center"},h("circle-rail-spinner",{role:"alert","aria-busy":"true","aria-live":"polite"}),";");let e=null;return e=this.state.view.length?this.state.view.map((t,e)=>this.renderBlock(t,e)):this.state.drag.over?h("div",{className:"drop-zone"},h("p",null,"Release the block to add it to the page.")):h("p",{className:"block w-full text-center p-4 font-grey-700"},"Click and drag the block on the left to begin building a new page."),h(v,null,h("header",null,h(j,{value:this.state.title,callback:this.updateTitle.bind(this)}),h("div",null,h("button",{onClick:this.handleReset,className:"pt-bttn -danger -text mr-1"},"Reset Page"),h("button",{onClick:null,className:"pt-bttn -solid -primary"},"Create Page"))),h("main",{className:"page-builder"},h("aside",null,t),h("div",{className:"view",ref:this.view},h("div",{className:"page "+(this.state.drag.over?"can-drop":""),onDragOver:this.dragOver,onDragLeave:this.dragLeave,onDrop:this.handleDrop},e,null))),h("div",{onDragEnter:this.startBodyDrag,onDragLeave:this.endBodyDrag,className:"capture-scroll top"}),h("div",{onDragEnter:this.startBodyDrag,onDragLeave:this.endBodyDrag,className:"capture-scroll bottom"}))}},null),F)}]);